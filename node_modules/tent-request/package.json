{
  "name": "tent-request",
  "description": "Performes requests against a Tent server",
  "version": "0.5.1",
  "main": "index.js",
  "keywords": [
    "tent",
    "post",
    "request",
    "api"
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/hendrikcech/tent-request.git"
  },
  "scripts": {
    "pretest": "node ./tests/configCheck.js",
    "test": "tape ./tests/*/*.js",
    "build": "browserify index.js -s request --ignore debug | uglifyjs > umd.min.js"
  },
  "author": {
    "name": "Hendrik Cech",
    "email": "hendrik.cech@gmail.com"
  },
  "license": "MIT",
  "dependencies": {
    "hawk": "~2.1.3",
    "debug": "~0.7.4"
  },
  "devDependencies": {
    "tape": "~2.12.0"
  },
  "readme": "# tent-request\nA node.js module to perform requests against a [Tent](https://tent.io) server. It supports the current version 0.3.\nThanks to [browserify](https://github.com/substack/node-browserify) this module can also be used in the browser.\n\nWARNING: The API is still very likely to change.\n\n## install\nWith npm:\n\t\n\tnpm install tent-request --save\n\n# usage\n\tvar request = require('tent-request')\n\n    var client = request(meta, auth)\n\nCreate a new client for each user with a meta post and auth credentials. The second parameter is optional.  \nThis library has no support for retrieving meta posts. You could use [tent-discover](https://github.com/hendrikcech/tent-discover) for this (hint hint).  \n`auth` has to be an object with keys named `id` OR `access_token`, `key` OR `hawk_key` and `algorithm` OR `hawk_algorithm`. You could use [tent-auth](https://github.com/hendrikcech/tent-auth) to get the credentials.\n\n## methods\n`client` exposes several functions to interact with the users' Tent server.\nIf you have questions regarding the specific behaviour of some of those methods, don't be afraid to look in the source, it's pretty basic.\n\n### result (callback)\nAll functions optionally take a callback as the last argument, which gets called after the full response is received.  \nThe `err` variable is null, unless `http.request()` throws an error, the status code is not 200 or the body contains an `error` key.  \nThe `response` object is forwarded from the underlying `http.request()`.  \n`body` either contains the JSON decoded response or a number, if the count of posts was requested.\n\n\tfunction callback(err, response, body) {\n\t\tif(err) return console.error(err)\n\t\tconsole.log('response with ' + response.statusCode)\n\t\tconsole.log(body)\n\t}\n\nRegardless of the callback, all functions return a [http.ClientRequest](http://nodejs.org/api/http.html#http_class_http_clientrequest) object. You can listen for the `response` event to catch the data.\nThis will likely change in future versions.\n\n\tclient.query().on('response', function(response) {\n\t\tresponse.pipe(process.stdout)\n\t})\n\n### .create\n\n\tclient.create(type[, metadata][, content][, cb])\n\nUse this function to create a new post. All paramaters except the type are optional. Information about the post schema can be found [in the official docs](https://tent.io/docs/posts#post-schema).\n\n#### metadata\nThe metadata object can contain `publishedAt`, `licenses`, `permissions` and `mentions` keys.\n\n**publishedAt**\n\n\tclient.create('https://tent.io/types/status/v0', { publishedAt: 1390986459798 })\n\nManually set when the post was published. Timestamp in milliseconds.\n\n**licenses**\n\n\tclient.create('https://tent.io/types/status/v0', { licenses: 'http://creativecommons.org/licenses/by/4.0/' })\n\tclient.create('https://tent.io/types/status/v0', { licenses: ['http://do.whatever', 'https://you.want'] })\n\nDefine the license(s) under which you want to publish the post. You can pass multiple licenses as an array of strings.\n\n**permissions**\n\n\tclient.create('https://tent.io/types/status/v0', { permissions: false })\n\tclient.create('https://tent.io/types/status/v0', { permissions: 'https://entity.cupcake.is' })\n\tclient.create('https://tent.io/types/status/v0', { permissions: ['https://entity.cupcake.is', 'group id' })\n\nYou can specify to only allow certain entities and groups to see your Tent posts.  \nControl if the post is public by using a boolean value: `true` -> public, `false` -> privat.  \nBy passing one string or multiple strings inside an array, you can set the groups and entities to give read permission for this post.\n\n**mentions**\n\n\tclient.create('https://tent.io/types/status/v0', { mentions: 'https://entity.cupcake.is' } // either mention a entity,\n\tclient.create('https://tent.io/types/status/v0', { mentions: 'postID') // a post\n\tclient.create('https://tent.io/types/status/v0', { mentions: 'http://enti.ty postID') // or a post by another entity\n\tclient.create('https://tent.io/types/status/v0', { mentions: ['http://enti.ty', 'postId', 'https://enti.ty postId'])\n\nPopulate the mentions array of the post. Mentions will be completely replaced with 0.4.\n\n\tclient.create('https://tent.io/types/status/v0', { mentions: {\n\t\tentity: 'http://entity.net',\n\t\tpost: 'postID',\n\t\tversion: 'versionHash'\n\t\ttype: 'type',\n\t\tpublic: true\n\t}})\n\t\nIf you need to set the version, type or public status, pass a object containing one or more of those keys. Multiple mentions can be made by passing an array of those.\n\n### .get\n\n\tclient.get(id[, entity][, opts][, callback])\n\nUse this function to interact with a specific post from the [`post` server endpoint](https://tent.io/docs/api#post).\n`get()` requires the `id` of the post to fetch. If no entity is passed as the second parameter, the function will try to get a post with the given id from the current entity.\n\n**Opts Object**\n\nkey | description | example\n--- | --- | ---\nversion | Set to interact with a specific version. By default the latest version will be picked. | `{ version: 'aB8mjnxlIeJ8n2tP5ztp' }`\nprofiles | Set to one or more of these values to get the relevant profiles: `entity`, `refs`, `mentions`, `permissions`, `parents` or `all`. `all` is an shortcut and replaced by the other values. | `{ profiles: ['entity', 'mentions'] }` `{ profiles: 'all' }`\n\n**sub functions**  \nThese subfunctions take the same arguments as the base function.\n\nfunction | description\n--- | ---\nclient.get.mentions() | Get all posts that are mentioning the post with the given `id`.\nclient.get.versions() | Get all versions of the post with the given `id`.\nclient.get.childVersions() | Get all versions to which the post with the given `id` is the parent.\n\nTo get the count of matched posts, use .count().\n\n\tclient.get.count('id')\n\tclient.get.mentions.count('id')\n\t...\n\n### .update\n\n\tclient.update(id, parent, type[, metadata][, content][, callback])\n\nUse this function to create a new version of an already existing post. Apart from the first two arguments, this function should be familiar to you: It has the same signature as the `create` function and `metadata` and `content` are accepting the same keys.\n\nPass the id of the post to update as the first argument. A second argument is required, which is a reference to the parent post. You can either pass the version id of a parent version or a full parent object, consisting of at least a `version` key and optionally `post` and `entity` keys. For more information on the update procedure take a look at [this github issue](https://github.com/tent/tent.io/issues/170).\n\nIn addition to the already known metadata you can set `versionPublishedAt` and `versionMessage`. `publishedAt` can not be changed.\n\n### .query\nThis method communicates with the `posts_feed` server endpoint and can be used to filter posts by certain criteria. More information can be found [here](https://tent.io/docs/api#postsfeed).  \nThe query endpoint will be massively reworked with 0.4, so this function will change as well.\n\n\tclient.query([query][, opts][, callback])\n\n**query object**  \nThe posts feed can be filtered by the following parameters.\n\nkey | description | example\n--- | --- | ---\nlimit | Limit the number of posts returned. | `client.query({ limit: 2 })`\t\nsortBy | Specify by which field the posts should be sorted. Possible values are `received_at`, `published_at`, `version.received_at` and `version.published_at`. | `client.query({ sortBy: 'received_at' })`\nsince | Return only posts since this point. Time in milliseconds since the Unix epoch. | `client.query({ since: 1373643809000 })`\nuntil | Return only posts until this point. Time in milliseconds since the Unix epoch. | `client.query({ until: 1373643814000 })`\nbefore | Return only posts before this point. Time in milliseconds since the Unix epoch. | `client.query({ before: 1373643909000 })`\ntypes | Specify the types of the returned posts. | `client.query({ types: 'http://ty.pe')` `client.query({ types: ['http://ty.pe', 'https://another.type'] })`\nentities | Filter by the publishing entity. | `client.query({ entities: 'http://one.entity' })` `client.query({ entities: ['https://or.more', 'http://than.one'] })`\nmentions | Query by mentions. Supports AND and OR operators. Entities in one array are connected by AND operators, commata represent ORs. | `client.query({ mentions: [['http://enti.ty' + '+id',/*AND*/ 'https://enti.ty'], /*OR*/ 'http://pet.er'] })`\n\n**Opts Object**\n\nkey | description | example\n--- | --- | ---\nprofiles | Set to one or more of these values to get the relevant profiles: `entity`, `refs`, `mentions`, `permissions`, `parents` or `all`. `all` is an shortcut and replaced by the other values. | `{ profiles: ['entity', 'mentions'] }` `{ profiles: 'all' }`\nmaxRefs | Set the maximum number of included refs. | `{ maxRefs: 5 }`\n\n**Count**  \nTo get the number of matched posts, call the subfunction `count`. Be aware that the actual posts won't be returned.\n\n\tclient.query.count([query][, opts][, callback])\n\n### .delete\nThis simple function can be used to delete specific posts. The `id` parameter is required.\n\n\tclient.delete(id[, opts][, callback])\n\n**opts object**\n\nkey | description | example\n--- | --- | ---\nversion | Only delete a specific version. | `{ version: 'versionId' }`\ncreateDeletePost | Control if a [delete post](https://tent.io/docs/post-types#delete) should be created. Server default: true. | `{ createDeletePost: false }`\n\n### pagination\nAll post lists support pagination. This includes the results of the `query`, `get.mentions`, `get.versions` and `get.childVersions` functions. The methods to retrieve these pages are bound to the context of the callback.\nThere are `this.next`, `this.prev`, `this.first` and `this.last` functions, if the corresponding pages are available.\n\n\tclient.query(cb)\n\n\tfunction cb(err, res, body) {\n\t\tconsole.log(body)\n\t\tif(this.next) this.next(cb)\n\t}\n\nThis code snippet would log all posts that are saved on a Tent server.\n\n# test\nDuplicate `tests/config.template.js`, rename the file to `config.json` and populate it. Then do\n\n\tnpm test\n\nto run the tests.\n\n# license\nThis software is released under the MIT license:\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/hendrikcech/tent-request/issues"
  },
  "_id": "tent-request@0.5.1",
  "dist": {
    "shasum": "adeb41e6e4ffc124410751fb668adc73c6132841"
  },
  "_from": "tent-request@",
  "_resolved": "https://registry.npmjs.org/tent-request/-/tent-request-0.5.1.tgz"
}
